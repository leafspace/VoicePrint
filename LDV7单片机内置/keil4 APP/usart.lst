C51 COMPILER V9.00   USART                                                                 05/29/2018 18:06:27 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE USART
OBJECT MODULE PLACED IN ..\obj\usart.obj
COMPILER INVOKED BY: C:\NSProgram\Keil\C51\BIN\C51.EXE ..\user\usart.c LARGE BROWSE INCDIR(..\code;..\user) DEBUG OBJEC
                    -TEXTEND PRINT(.\usart.lst) OBJECT(..\obj\usart.obj)

line level    source

   1          /***************************é£éŸ³äº‘ç”µå­?****************************
   2          **  å·¥ç¨‹åç§°?¼šYS-V0.7è¯­éŸ³è¯?åˆ«æ¨¡å—é©±åŠ¨ç¨‹åº?
   3          **      CPU: STC11L08XE
   4          **      æ™¶æŒ¯?¼?22.1184MHZ
   5          **      æ³¢ç‰¹ç??¼?9600 bit/S
   6          **      é…å¥—äº§å“ä¿¡æ¯?¼šYS-V0.7è¯­éŸ³è¯?åˆ«å¼€å‘æ¿
   7          **                http://yuesheng001.taobao.com
   8          **  ä½œè€??¼šzdings
   9          **  è”ç³»?¼?751956552@qq.com
  10          **  ä¿®æ”¹æ—¥æœŸï¼?2013.9.13
  11          **  è¯´æ˜ï¼šå£ä»¤æ¨¡å¼ï¼? å³æ¯æ¬¡è¯?åˆ«æ—¶éƒ½éœ€è¦è¯´â€œå°æ°â€è¿™ä¸ªå£ä»¤ ?¼Œæ‰èƒ½å¤Ÿè¿›è¡Œä¸‹ä
             -¸€çº§çš?è¯?åˆ«
  12          /***************************é£éŸ³äº‘ç”µå­?******************************/
  13          #include "config.h"
*** ERROR C202 IN LINE 7 OF \WGPJ\CODE\ASRBASIC/REG_RW.H: 'P4': undefined identifier
*** ERROR C202 IN LINE 8 OF \WGPJ\CODE\ASRBASIC/REG_RW.H: 'P3': undefined identifier
*** ERROR C202 IN LINE 9 OF \WGPJ\CODE\ASRBASIC/REG_RW.H: 'P2': undefined identifier
  14          #define FOSC 22118400L                                                      // System frequency
  15          uint32_t baud = 9600;                                                       // UART baudrate
  16          
  17          /************************************************************************
  18          å‡½ æ•° åï¼? ä¸²å£åˆå§‹åŒ–
  19          åŠŸè?½æè¿°?¼? STC10L08XE å•ç‰‡æœºä¸²å£åˆå§‹åŒ–å‡½æ•°
  20          è¿”å›å‡½æ•°?¼? none
  21          å…¶ä»–è¯´æ˜ï¼? none
  22          **************************************************************************/
  23          void UartIni(void)
  24          {
  25   1              SCON = 0x50;            //8-bit variable UART
  26   1              TMOD = 0x20;            //Set Timer1 as 8-bit auto reload mode
  27   1              TH1 = TL1 = -(FOSC / 12 / 32 / baud); //Set auto-reload vaule
  28   1              TR1 = 1;                //Timer1 start run
  29   1              ES = 1;                 //Enable UART interrupt
  30   1              EA = 1;                 //Open master interrupt switch
  31   1      }
  32          
  33          /***********************************************************
  34          * å?    ç§°?¼?
  35          * åŠ?    èƒ½?¼?
  36          * å…¥å£å‚æ•°?¼? æ—?
  37          * å‡ºå£å‚æ•°?¼šæ— 
  38          * è¯´    æ˜ï¼?
  39          **********************************************************/
  40          void Uart_Isr() interrupt 4 using 1
  41          {
  42   1              if (RI)
  43   1              {
  44   2      
  45   2              }
  46   1      
  47   1      }
  48          
  49          /************************************************************************
  50          åŠŸè?½æè¿°?¼?         ä¸²å£å‘é€ä¸€å­—èŠ‚æ•°æ®
C51 COMPILER V9.00   USART                                                                 05/29/2018 18:06:27 PAGE 2   

  51          å…¥å£å‚æ•°?¼? DAT:å¸¦å‘é€çš„æ•°æ®
  52          è¿? å›? å€¼?¼?  none
  53          å…¶ä»–è¯´æ˜ï¼? none
  54          **************************************************************************/
  55          void UARTSendByte(uint8_t DAT)
  56          {
  57   1              ES = 0;
  58   1              TI = 0;
  59   1              SBUF = DAT;
  60   1              while (TI == 0);
  61   1              TI = 0;
  62   1              ES = 1;
  63   1      }
  64          
  65          /************************************************************************
  66          åŠŸè?½æè¿°?¼? ä¸²å£å‘é€å­—ç¬¦ä¸²æ•°æ®
  67          å…¥å£å‚æ•°?¼?         *DAT?¼šå­—ç¬¦ä¸²æŒ?é’?
  68          è¿? å›? å€¼?¼? none
  69          å…¶ä»–è¯´æ˜ï¼? API ä¾›å¤–éƒ¨ä½¿ç”¨?¼Œç›´è§‚ï¼?
  70          **************************************************************************/
  71          void PrintCom(uint8_t *DAT)
  72          {
  73   1              while (*DAT)
  74   1              {
  75   2                      UARTSendByte(*DAT++);
  76   2              }
  77   1      }
  78          
  79          /************************************************************************
  80          åŠŸè?½æè¿°?¼? ä¸²å£å‘é€è¯?åˆ«çš?å­—ç¬¦ä¸²æ•°æ®
  81          å…¥å£å‚æ•°?¼?         code?¼šè¯?åˆ«çš?å­—ç¬¦code
  82          è¿? å›? å€¼?¼? none
  83          å…¶ä»–è¯´æ˜ï¼? API ä¾›å¤–éƒ¨ä½¿ç”¨?¼Œç›´è§‚ï¼?
  84          **************************************************************************/
  85          void PrintComReg(uint8_t codeID)
  86          {
  87   1              uint8_t buffer[COMBUFFERSIZE] = { 0 };
  88   1              sprintf(buffer, "<LDV7 REG>%d</LDV7 REG>", codeID);
  89   1              PrintCom(buffer);
  90   1      }

C51 COMPILATION COMPLETE.  0 WARNING(S),  3 ERROR(S)
