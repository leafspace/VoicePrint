C51 COMPILER V9.00   MAINCOMMON                                                            06/12/2018 12:46:43 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE MAINCOMMON
OBJECT MODULE PLACED IN ..\obj\MainCommon.obj
COMPILER INVOKED BY: C:\NSProgram\Keil\C51\BIN\C51.EXE ..\code\ASRBasic\MainCommon.c COMPACT BROWSE INCDIR(..\code;..\u
                    -ser) DEBUG OBJECTEXTEND PRINT(.\MainCommon.lst) OBJECT(..\obj\MainCommon.obj)

line level    source

   1          #include "MainCommon.h"
   2          
   3          uint8_t G0_flag = DISABLE;                                                  // è¿è¡Œæ ‡å¿—ï¼ŒENABLE:è¿è¡
             -Œ DISABLE:æœªè¿è¡Œ
   4          sbit LED = P4 ^ 2;                                                          // ä¿¡å·æŒ‡ç¤ºç¯
   5          CommondQueue commondQueue;                                                  // å°†è¦å‘é€çš„è¯†åˆ«è¯åˆ—
             -è¡¨
   6          
   7          /*
   8          sbit PA1 = P1 ^ 0;                                                          // å¯¹åº”æ¿ä¸Šæ ‡å· P1.0
   9          sbit PA2 = P1 ^ 1;                                                          // å¯¹åº”æ¿ä¸Šæ ‡å· P1.1
  10          sbit PA3 = P1 ^ 2;                                                          // .....
  11          sbit PA4 = P1 ^ 3;                                                          // .....
  12          sbit PA5 = P1 ^ 4;                                                          // .....
  13          sbit PA6 = P1 ^ 5;                                                          // .....
  14          sbit PA7 = P1 ^ 6;                                                          // å¯¹åº”æ¿ä¸Šæ ‡å· P1.6
  15          sbit PA8 = P1 ^ 7;                                                          // å¯¹åº”æ¿ä¸Šæ ‡å· P1.7
  16          */
  17          
  18          void MainMenu()
  19          {
  20   1              uint8 i = 0;
  21   1              uint8_t msgBuffer[COMBUFFERSIZE] = { 0 };
  22   1              // æ‰“å°å¯æ“ä½œèœå•
  23   1              PrintCom("========================================\r\n");
  24   1              PrintCom("========== LDV7 Voice Printr ===========\r\n");
  25   1              sprintf(msgBuffer, "First level password : %s\r\n", sRecog[0]);
  26   1              PrintCom(msgBuffer);
  27   1              PrintCom("Secondary password   : \r\n");
  28   1              for (i = 1; i < DATE_ROW; ++i) {
  29   2                      sprintf(msgBuffer, "    %d. ", (unsigned int)i);
  30   2                      PrintCom(msgBuffer);
  31   2                      sprintf(msgBuffer, "%s \r\n", sRecog[i]);
  32   2                      PrintCom(msgBuffer);
  33   2              }
  34   1      }
  35          
  36          /***********************************************************
  37          * å    ç§°ï¼š          LEDç¯æµ‹è¯•
  38          * åŠŸ    èƒ½ï¼š å•ç‰‡æœºæ˜¯å¦å·¥ä½œæŒ‡ç¤º
  39          * å…¥å£å‚æ•°ï¼š æ— 
  40          * å‡ºå£å‚æ•°ï¼šæ— 
  41          * è¯´    æ˜ï¼š
  42          **********************************************************/
  43          void Led_test(void)
  44          {
  45   1              LED = ~LED;
  46   1              Delay200ms();
  47   1              LED = ~LED;
  48   1              Delay200ms();
  49   1              LED = ~LED;
  50   1              Delay200ms();
  51   1              LED = ~LED;
  52   1              Delay200ms();
C51 COMPILER V9.00   MAINCOMMON                                                            06/12/2018 12:46:43 PAGE 2   

  53   1              LED = ~LED;
  54   1              Delay200ms();
  55   1              LED = ~LED;
  56   1      }
  57          
  58          /***********************************************************
  59          * å    ç§°ï¼š void MCU_init()
  60          * åŠŸ    èƒ½ï¼š å•ç‰‡æœºåˆå§‹åŒ–
  61          * å…¥å£å‚æ•°ï¼š
  62          * å‡ºå£å‚æ•°ï¼š
  63          * è¯´    æ˜ï¼š
  64          * è°ƒç”¨æ–¹æ³•ï¼š
  65          **********************************************************/
  66          void MCU_init()
  67          {
  68   1              P0 = 0xff;
  69   1              P1 = 0x00;
  70   1              P2 = 0xff;
  71   1              P3 = 0xff;
  72   1              P4 = 0xff;
  73   1      
  74   1              P1M0 = 0XFF;
  75   1              P1M1 = 0X00;
  76   1      
  77   1              LD_MODE = 0;                                                                // è®¾ç½®MDç®¡è„šä¸ºä½ï¼Œå¹¶è¡Œæ¨¡å¼è
             -¯»å–
  78   1              IE0 = 1;
  79   1              EX0 = 1;
  80   1              EA = 1;
  81   1      }
  82          /***********************************************************
  83          * å    ç§°ï¼š å»¶æ—¶å‡½æ•°
  84          * åŠŸ    èƒ½ï¼š
  85          * å…¥å£å‚æ•°ï¼š
  86          * å‡ºå£å‚æ•°ï¼š
  87          * è¯´    æ˜ï¼š
  88          * è°ƒç”¨æ–¹æ³•ï¼š
  89          **********************************************************/
  90          void Delay200us()                                                                   // @22.1184MHz
  91          {
  92   1              unsigned char i, j;
  93   1              _nop_();
  94   1              _nop_();
  95   1              i = 5;
  96   1              j = 73;
  97   1              do
  98   1              {
  99   2                      while (--j);
 100   2              } while (--i);
 101   1      }
 102          
 103          void  delay(unsigned long uldata)
 104          {
 105   1              unsigned int j = 0;
 106   1              unsigned int g = 0;
 107   1              while (uldata--)
 108   1                      Delay200us();
 109   1      }
 110          
 111          void Delay200ms()                                                                       // @22.1184MHz
 112          {
 113   1              unsigned char i, j, k;
C51 COMPILER V9.00   MAINCOMMON                                                            06/12/2018 12:46:43 PAGE 3   

 114   1      
 115   1              i = 17;
 116   1              j = 208;
 117   1              k = 27;
 118   1              do
 119   1              {
 120   2                      do
 121   2                      {
 122   3                              while (--k);
 123   3                      } while (--j);
 124   2              } while (--i);
 125   1      }
 126          
 127          /***********************************************************
 128          * å    ç§°ï¼š ä¸­æ–­å¤„ç†å‡½æ•°
 129          * åŠŸ    èƒ½ï¼š
 130          * å…¥å£å‚æ•°ï¼š
 131          * å‡ºå£å‚æ•°ï¼š
 132          * è¯´    æ˜ï¼š
 133          * è°ƒç”¨æ–¹æ³•ï¼š
 134          **********************************************************/
 135          void ExtInt0Handler(void) interrupt 0
 136          {
 137   1              ProcessInt0();
 138   1      }
 139          
 140          /***********************************************************
 141          * å    ç§°ï¼šç”¨æˆ·æ‰§è¡Œå‡½æ•°
 142          * åŠŸ    èƒ½ï¼šè¯†åˆ«æˆåŠŸåï¼Œæ‰§è¡ŒåŠ¨ä½œå¯åœ¨æ­¤è¿›è¡Œä¿®æ”¹
 143          * å…¥å£å‚æ•°ï¼š æ— 
 144          * å‡ºå£å‚æ•°ï¼šæ— 
 145          * è¯´    æ˜ï¼š é€šè¿‡æ§åˆ¶PAxç«¯å£çš„é«˜ä½ç”µå¹³ï¼Œä»è€Œæ§åˆ¶å¤–éƒ¨ç»§ç”µå™¨çš„é€šæ–­
 146          **********************************************************/
 147          void User_handle(uint8 dat)
 148          {
 149   1              uint8_t tempBuffer[COMBUFFERSIZE] = { 0 };
 150   1              PrintCom("TIP : Recognized code ï¼š\r\n");
 151   1              sprintf(tempBuffer, "%d\r\n", dat);
 152   1              PrintCom(tempBuffer);
 153   1      
 154   1              G0_flag = ENABLE;
 155   1      
 156   1              if (dat < CODE_ZHANG) {
 157   2                      commondQueue.commondQueue[commondQueue.queueLength] = dat;      // å°†è¯†åˆ«åˆ°çš„å…³é”®è¯è¯†åˆ«ç æ”¾å
             -…¥é˜Ÿåˆ—
 158   2                      commondQueue.queueLength++;
 159   2                      PrintComReg();
 160   2              } else
 161   1              {
 162   2                      PrintCom("ERROR : Can't recognized ! \r\n");
 163   2              }
 164   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    489    ----
   CONSTANT SIZE    =    318    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =     12     110
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
C51 COMPILER V9.00   MAINCOMMON                                                            06/12/2018 12:46:43 PAGE 4   

END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
